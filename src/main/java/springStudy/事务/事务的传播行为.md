**Spring事务的传播行为(Propagation Behavior)定义了事务方法被另一个事务方法调用时，事务应该如何传播。这是Spring事务管理中的一个核心概念。**

# 七种传播行为类型
Spring定义了7种传播行为，通过Propagation枚举类表示：
## 三种同一个事务中
* REQUIRED(默认值)
  * 如果当前存在事务，则加入该事务
  * 如果当前没有事务，则创建一个新事务
  * 这是最常用的传播行为
* SUPPORTS
  * 如果当前存在事务，则加入该事务
  * 如果当前没有事务，则以非事务方式执行
* MANDATORY
  * 如果当前存在事务，则加入该事务
  * 如果当前没有事务，则抛出异常
## 四种不在同一个事务中
* REQUIRES_NEW
  * 创建一个新事务
  * 如果当前存在事务，则把当前事务挂起
  * 新事务与原有事务相互独立
* NOT_SUPPORTED
  * 以非事务方式执行操作
  * 如果当前存在事务，则把当前事务挂起
* NEVER
  * 以非事务方式执行
  * 如果当前存在事务，则抛出异常
* NESTED
  * 如果当前存在事务，则在嵌套事务内执行
  * 如果当前没有事务，则创建一个新事务
  * 嵌套事务是外部事务的子事务
>基于savePoint（保存点）技术。嵌套事务一个非常重要的概念就是内层事务依赖于外层事务。外层事务失败时，会回滚内层事务所做的动作。而内层事务操作失败并不会引起外层事务的回滚。

# 传播行为对比
|传播行为|当前有事务|当前无事务|
|----|---|---|----|
|REQUIRED|加入当前事务|创建新事务|
|SUPPORTS|加入当前事务|非事务执行|
|MANDATORY|加入当前事务|抛出异常|
|REQUIRES_NEW|挂起当前事务，创建新事务|创建新事务|
|NOT_SUPPORTED|挂起当前事务，非事务执行|非事务执行|
|NEVER|抛出异常|非事务执行|
|NESTED|创建嵌套事务|创建新事务|
# 实际应用场景
* REQUIRED：大多数业务方法使用此传播行为
* REQUIRES_NEW：需要独立事务的操作，如日志记录
* NESTED：部分操作需要回滚，但不影响主事务的场景
* NOT_SUPPORTED：不需要事务支持的操作，如查询操作
